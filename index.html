<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="Interactive Hex Art Creator - Create beautiful hexagonal art with touch-friendly controls">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon.svg">
    <title>HexCraft - Interactive Hex Art Creator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header Toolbar -->
        <header class="toolbar">
            <div class="toolbar-left">
                <h1 class="logo">
                    <span class="logo-icon">⬡</span>
                    <span class="logo-text">HexCraft</span>
                </h1>
            </div>
            <div class="toolbar-center">
                <div class="tool-group">
                    <button class="tool-btn active" data-tool="draw" title="Draw (D)">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                    </button>
                    <button class="tool-btn" data-tool="fill" title="Fill (F)">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12z"/></svg>
                    </button>
                    <button class="tool-btn" data-tool="erase" title="Eraser (E)">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.01 4.01 0 01-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0M4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-4.95-4.95-4.95 4.95z"/></svg>
                    </button>
                </div>
                <div class="divider"></div>
                <div class="tool-group">
                    <button class="tool-btn" id="undoBtn" title="Undo (Ctrl+Z)" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
                    </button>
                    <button class="tool-btn" id="redoBtn" title="Redo (Ctrl+Y)" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>
                    </button>
                </div>
                <div class="divider"></div>
                <div class="tool-group">
                    <button class="tool-btn" id="clearBtn" title="Clear Canvas">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
                    </button>
                    <button class="tool-btn" id="downloadBtn" title="Download Art">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></svg>
                    </button>
                </div>
            </div>
            <div class="toolbar-right">
                <button class="tool-btn" id="soundToggle" title="Toggle Sound">
                    <svg viewBox="0 0 24 24" fill="currentColor" class="sound-on"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    <svg viewBox="0 0 24 24" fill="currentColor" class="sound-off" style="display:none"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                </button>
                <button class="tool-btn" id="settingsBtn" title="Settings">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                </button>
            </div>
        </header>

        <!-- Main Canvas Area -->
        <main class="canvas-container" id="canvasContainer">
            <canvas id="hexCanvas"></canvas>
            <!-- Zoom Controls -->
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomIn" title="Zoom In">+</button>
                <span class="zoom-level" id="zoomLevel">100%</span>
                <button class="zoom-btn" id="zoomOut" title="Zoom Out">−</button>
                <button class="zoom-btn" id="zoomReset" title="Reset View">⟲</button>
            </div>
        </main>

        <!-- Color Palette Sidebar -->
        <aside class="color-palette" id="colorPalette">
            <div class="palette-header">
                <span>Colors</span>
                <button class="collapse-btn" id="collapseColors">◀</button>
            </div>
            <div class="current-color-display">
                <div class="current-color" id="currentColor"></div>
                <input type="color" id="colorPicker" value="#6366f1">
            </div>
            <div class="preset-colors" id="presetColors">
                <!-- Colors will be generated by JS -->
            </div>
            <div class="recent-colors">
                <span class="section-label">Recent</span>
                <div class="recent-color-list" id="recentColors"></div>
            </div>
        </aside>

        <!-- Mobile Bottom Toolbar -->
        <nav class="mobile-toolbar" id="mobileToolbar">
            <button class="mobile-tool active" data-tool="draw">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                <span>Draw</span>
            </button>
            <button class="mobile-tool" data-tool="fill">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5M5.21 10L10 5.21 14.79 10M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12z"/></svg>
                <span>Fill</span>
            </button>
            <button class="mobile-tool color-btn" id="mobileColorBtn">
                <div class="mobile-color-preview"></div>
                <span>Color</span>
            </button>
            <button class="mobile-tool" id="mobileUndo">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
                <span>Undo</span>
            </button>
            <button class="mobile-tool" id="mobileMenu">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                <span>More</span>
            </button>
        </nav>

        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay">
            <div class="mobile-menu-content">
                <button class="mobile-menu-item" data-tool="erase">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.01 4.01 0 01-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0M4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-4.95-4.95-4.95 4.95z"/></svg>
                    <span>Eraser</span>
                </button>
                <button class="mobile-menu-item" id="mobileRedo">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/></svg>
                    <span>Redo</span>
                </button>
                <button class="mobile-menu-item" id="mobileClear">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
                    <span>Clear</span>
                </button>
                <button class="mobile-menu-item" id="mobileDownload">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></svg>
                    <span>Download</span>
                </button>
                <button class="mobile-menu-item" id="mobileSoundToggle">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                    <span>Sound On</span>
                </button>
            </div>
        </div>

        <!-- Mobile Color Picker -->
        <div class="mobile-color-overlay" id="mobileColorOverlay">
            <div class="mobile-color-content">
                <div class="mobile-color-header">
                    <span>Select Color</span>
                    <button class="close-btn" id="closeMobileColor">×</button>
                </div>
                <div class="mobile-preset-colors" id="mobilePresetColors"></div>
                <div class="mobile-custom-color">
                    <label>Custom Color</label>
                    <input type="color" id="mobileColorPicker" value="#6366f1">
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="close-btn" id="closeSettings">×</button>
                </div>
                <div class="modal-body">
                    <div class="setting-group">
                        <label>Grid Size</label>
                        <div class="setting-control">
                            <input type="range" id="gridSizeSlider" min="10" max="40" value="20">
                            <span id="gridSizeValue">20</span>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label>Hex Size</label>
                        <div class="setting-control">
                            <input type="range" id="hexSizeSlider" min="15" max="50" value="30">
                            <span id="hexSizeValue">30px</span>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label>Show Grid Lines</label>
                        <div class="setting-control">
                            <label class="toggle">
                                <input type="checkbox" id="showGridLines" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label>Background Color</label>
                        <div class="setting-control">
                            <input type="color" id="bgColorPicker" value="#0f0f23">
                        </div>
                    </div>
                    <button class="btn-primary" id="applySettings">Apply Changes</button>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Install PWA Banner -->
        <div class="install-banner" id="installBanner">
            <span>Install HexCraft for the best experience</span>
            <button class="btn-install" id="installBtn">Install</button>
            <button class="btn-dismiss" id="dismissInstall">×</button>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>
